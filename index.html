<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>My Weather</title>

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

	<script>
		function getLocation() {
			if (navigator.geolocation) {
				navigator.geolocation.getCurrentPosition(showPosition);
			} else {
				console.log("Geolocation is not supported by this browser.");
			}
		}

		function showPosition(position) {
			console.log("Latitude: " + position.coords.latitude + " Longitude: " + position.coords.longitude);
		}

		$(function() {
			
			getLocation();

			initMap();

			/* $.get("http://wp.pl/", function(data){
				console.log(data);
			}); */
		});
	</script>

<script>
		var map;
		function initMap() {

			var latitude = 27.7172453; // YOUR LATITUDE VALUE
			var longitude = 85.3239605; // YOUR LONGITUDE VALUE

			var myLatLng = {lat: latitude, lng: longitude};

			document.getElementById('latclicked').innerHTML = myLatLng.lat;
			document.getElementById('longclicked').innerHTML = myLatLng.lng;
			
			map = new google.maps.Map(document.getElementById('map'), {
				center: {lat: 52.000, lng: 19.500},
				zoom: 7,
				disableDoubleClickZoom: true
			});

			google.maps.event.addListener(map,'click',function(event) {
				let _lat = event.latLng.lat();
				let _lng = event.latLng.lng();

				document.getElementById('latclicked').innerHTML = _lat;
				document.getElementById('longclicked').innerHTML =  _lng;

				//http://api.openweathermap.org/data/2.5/weather?lat=53.08&lon=17.87&APPID=46a61e9348b237e1836ee6c9f7301638

				$.get("https://api.openweathermap.org/data/2.5/weather?lat="+ _lat +"&lon="+ _lng +"&APPID=46a61e9348b237e1836ee6c9f7301638", function(data){
					console.log(data);
				});
			});

			var marker = new google.maps.Marker({
				position: myLatLng,
				map: map,
				//title: 'Hello World'
				
				// setting latitude & longitude as title of the marker
				// title is shown when you hover over the marker
				title: latitude + ', ' + longitude 
			});

			marker.addListener('click', function(event) {
				document.getElementById('latclicked').innerHTML = event.latLng.lat();
				document.getElementById('longclicked').innerHTML =  event.latLng.lng();
			});

			google.maps.event.addListener(map,'dblclick', function(event) {
				var marker = new google.maps.Marker({
					position: event.latLng, 
					map: map, 
					title: event.latLng.lat()+', '+event.latLng.lng()
				});
				
				// Update lat/long value of div when the marker is clicked
				marker.addListener('click', function() {
					document.getElementById('latclicked').innerHTML = event.latLng.lat();
					document.getElementById('longclicked').innerHTML =  event.latLng.lng();
				});
			});
		}
	</script>

	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA97EJQ557nR16jGfyB42A4T9mTT9WTSdY" async defer></script>

	<style>
		/* Always set the map height explicitly to define the size of the div
			* element that contains the map. */
		#map {
			width: 100%;
			height: 800px;
		}
		/* Optional: Makes the sample page fill the window. */
		html, body {
			height: 100%;
			margin: 0;
			padding: 0;
		}
		
		/* body { background-color:  } */
		header { background-color: #ffffff; }
	</style>

</head>
<body>
	<div class="container">
		<header>
			<h1>My<span class="top-color">Weather</span></h1>
			<nav>
				<ul>
					<li><a href="#">Forecasts</a></li>
					<li><a href="#">Statistics</a></li>
					<li><a href="#">Photos</a></li>
					<li><a href="#">News</a></li>
				</ul>
			</nav>
		</header>

		<main>
			<div>Latitude: <span id="latclicked"></span></div>
			<div>Longitude: <span id="longclicked"></span></div>
			
			<div id="latmoved"></div>
			<div id="longmoved"></div>
			<div id="map"></div>
			
		</main>
	</div>
</body>
</html>